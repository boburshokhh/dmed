# Изменения в роутинге приложения

## Новый роут для просмотра документов

### `/el-docs/[uuid]` - Страница просмотра PDF документа

**Описание:**
- Загружает данные документа через API по UUID
- Отображает PDF документ в полноэкранном режиме
- Не передает данные через URL (безопасность и чистота URL)

**Путь к файлу:** `front/app/el-docs/[uuid]/page.js`

**Пример URL:** 
```
http://localhost:3000/el-docs/31ef792c-5e76-4bc3-b32c-de98a97e5999
```

## Изменения в существующих страницах

### 1. Главная страница (`/`)
**Файл:** `front/app/page.js`

**Изменено:**
- После успешной проверки PIN-кода перенаправляет на `/el-docs/{uuid}`
- Вместо: `/document/{doc_number}?data={...}`
- Теперь: `/el-docs/{uuid}`

### 2. Страница доступа (`/access/[uuid]`)
**Файл:** `front/app/access/[uuid]/page.js`

**Изменено:**
- После успешной проверки PIN-кода перенаправляет на `/el-docs/{uuid}`
- Использует UUID из API ответа или из параметров URL

## Преимущества нового подхода

### ✅ Безопасность
- Данные документа не передаются через URL
- Невозможно перехватить данные из адресной строки
- Чистый и короткий URL

### ✅ Производительность
- Меньший размер URL (нет длинного JSON в параметрах)
- Данные загружаются напрямую из API
- Возможность кэширования на сервере

### ✅ Удобство
- Простой URL для копирования и отправки
- Легко запомнить формат: `/el-docs/{uuid}`
- Работает на всех устройствах (телефоны, планшеты, десктоп)

## Поток работы приложения

```
1. Пользователь переходит на: /access/{uuid}
   ↓
2. Вводит PIN-код
   ↓
3. Система проверяет PIN через API: POST /api/access/{uuid}/verify-pin
   ↓
4. При успехе перенаправляет на: /el-docs/{uuid}
   ↓
5. Страница загружает данные через: GET /api/access/{uuid}
   ↓
6. Отображает PDF документ с кнопкой печати
```

## API Endpoints

### GET `/api/access/{uuid}`
**Описание:** Получение информации о документе по UUID

**Ответ:**
```json
{
  "success": true,
  "document": {
    "id": 70,
    "doc_number": "№ 01ВШ 081125568",
    "uuid": "e4521bdc-306e-4a20-9a84-005b47768d5b",
    "patient_name": "ИВАНОВ ИВАН ИВАНОВИЧ",
    "pdf_url": "http://localhost:5000/download/70",
    "pdf_url_by_uuid": "http://localhost:5000/download-by-uuid/e4521bdc-306e-4a20-9a84-005b47768d5b",
    ...
  }
}
```

### POST `/api/access/{uuid}/verify-pin`
**Описание:** Проверка PIN-кода для документа

**Запрос:**
```json
{
  "pin_code": "1234"
}
```

**Ответ:** (такой же как GET `/api/access/{uuid}`)

## Установка и запуск

```bash
cd front
npm install
npm run dev
```

Приложение будет доступно по адресу: http://localhost:3000

