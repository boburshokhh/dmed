# Настройка выравнивания PIN-кода и QR-кода в шаблоне

## ✅ Возможность

Теперь вы можете указывать выравнивание PIN-кода и QR-кода **напрямую в шаблоне DOCX**, не изменяя код!

Это экономит время и позволяет быстро менять расположение элементов без перекомпиляции кода.

---

## 📋 Поддерживаемые плейсхолдеры

### 1. QR-код с выравниванием

```
{{qr_code:left}}   - QR-код выровнен по левому краю
{{qr_code:right}} - QR-код выровнен по правому краю
```

**Примечание:** При использовании `{{qr_code:left}}` или `{{qr_code:right}}` PIN-код будет справа по умолчанию.

### 2. PIN-код и QR-код вместе с выравниванием

```
{{pin_code_with_qr:left}}   - Оба элемента выровнены по левому краю
{{pin_code_with_qr:right}}  - Оба элемента выровнены по правому краю
```

**Примечание:** При использовании `{{pin_code_with_qr:left}}` или `{{pin_code_with_qr:right}}` оба элемента (PIN и QR) будут выровнены одинаково.

### 3. Только PIN-код с выравниванием

```
{{pin_code:left}}   - Только PIN-код, выровнен по левому краю
{{pin_code:right}}  - Только PIN-код, выровнен по правому краю
```

**Примечание:** При использовании `{{pin_code:left}}` или `{{pin_code:right}}` QR-код не будет добавлен.

### 4. Старые форматы (для обратной совместимости)

```
{{qr_code}}         - По умолчанию: PIN справа, QR слева
{{pin_code_with_qr}} - По умолчанию: PIN справа, QR слева
{{pin_code}}        - Только PIN-код, по умолчанию справа
```

---

## 🎯 Примеры использования

### Пример 1: QR-код слева, PIN-код справа

В шаблоне DOCX:
```
{{qr_code:left}}
```

**Результат:**
```
┌─────────────────────────────────────┐
│          2653 [QR]                 │  ← PIN справа, QR слева
└─────────────────────────────────────┘
```

### Пример 2: Оба элемента слева

В шаблоне DOCX:
```
{{pin_code_with_qr:left}}
```

**Результат:**
```
┌─────────────────────────────────────┐
│ 2653 [QR]                           │  ← Оба слева
└─────────────────────────────────────┘
```

### Пример 3: Оба элемента справа

В шаблоне DOCX:
```
{{pin_code_with_qr:right}}
```

**Результат:**
```
┌─────────────────────────────────────┐
│                           2653 [QR] │  ← Оба справа
└─────────────────────────────────────┘
```

### Пример 4: QR-код справа, PIN-код справа

В шаблоне DOCX:
```
{{qr_code:right}}
```

**Результат:**
```
┌─────────────────────────────────────┐
│                           2653 [QR] │  ← PIN справа, QR справа
└─────────────────────────────────────┘
```

---

## 🔧 Технические детали

### Функция парсинга

Функция `parse_placeholder_alignment()` анализирует текст параграфа и определяет:
- Тип плейсхолдера (`qr_code`, `pin_code`, `pin_code_with_qr`)
- Выравнивание PIN-кода (`left` или `right`)
- Выравнивание QR-кода (`left` или `right`)

### Применение выравнивания

Выравнивание применяется через параметры функции `create_pin_qr_table()`:
```python
create_pin_qr_table(pin_alignment='right', qr_alignment='left')
```

### Значения по умолчанию

Если плейсхолдер не найден или используется старый формат:
- PIN-код: `right` (справа)
- QR-код: `left` (слева)

---

## 📐 Логика выравнивания

### Для `{{qr_code:left}}` или `{{qr_code:right}}`:
- PIN-код: всегда справа (по умолчанию)
- QR-код: согласно указанному выравниванию

### Для `{{pin_code_with_qr:left}}` или `{{pin_code_with_qr:right}}`:
- PIN-код: согласно указанному выравниванию
- QR-код: согласно указанному выравниванию (одинаково с PIN)

### Для `{{pin_code:left}}` или `{{pin_code:right}}`:
- PIN-код: согласно указанному выравниванию
- QR-код: не добавляется

---

## 🔄 Обратная совместимость

Старые плейсхолдеры продолжают работать:
- `{{qr_code}}` → `{{pin_code_with_qr:right}}` (PIN справа, QR слева)
- `{{pin_code_with_qr}}` → `{{pin_code_with_qr:right}}` (PIN справа, QR слева)
- `{{pin_code}}` → `{{pin_code:right}}` (только PIN справа)

---

## ✅ Преимущества

1. **Не нужно менять код** - все настройки в шаблоне
2. **Быстрое изменение** - просто измените плейсхолдер в шаблоне
3. **Гибкость** - можно использовать разные выравнивания для разных документов
4. **Обратная совместимость** - старые шаблоны продолжают работать

---

## 📝 Резюме

**Новая возможность:** Указание выравнивания через плейсхолдеры в шаблоне  
**Формат:** `{{placeholder:alignment}}` где `alignment` = `left` или `right`  
**Поддерживаемые плейсхолдеры:** `qr_code`, `pin_code`, `pin_code_with_qr`  
**Результат:** Можно менять расположение элементов без изменения кода ✅

Теперь вы можете легко настраивать расположение PIN-кода и QR-кода прямо в шаблоне DOCX!

