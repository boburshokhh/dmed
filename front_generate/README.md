# DMED Admin - Панель управления генерацией документов

Фронтенд-приложение для управления генерацией медицинских документов с системой ролей.

## Технологии

- **Next.js 14** - React фреймворк
- **Tailwind CSS** - Стилизация
- **Radix UI** - UI компоненты
- **Lucide React** - Иконки
- **Axios** - HTTP клиент

## Роли пользователей

### Super Admin
- Полный доступ ко всем функциям
- Управление администраторами (создание, редактирование, удаление)
- Генерация документов
- Просмотр статистики

### Admin
- Генерация документов
- Просмотр списка документов

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Создайте файл `.env.local` в корне проекта:
```env
API_URL=http://localhost:5000/api
```

3. Запустите сервер разработки:
```bash
npm run dev
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

## Настройка базы данных

Перед запуском приложения необходимо выполнить SQL миграцию для создания таблицы пользователей:

```bash
# Выполните миграцию из файла migrations/001_create_users_table.sql
psql -h your_host -U your_user -d dmed -f migrations/001_create_users_table.sql
```

## Структура проекта

```
front_generate/
├── app/                    # Страницы Next.js
│   ├── login/             # Страница входа
│   ├── dashboard/         # Главная панель (super_admin)
│   ├── documents/         # Генерация документов
│   └── admin/             # Управление пользователями
├── components/            # React компоненты
│   ├── ui/               # UI компоненты (кнопки, формы и т.д.)
│   └── layout/           # Компоненты макета
├── lib/                  # Утилиты
│   ├── api.js           # Настройка API клиента
│   ├── auth.js          # Функции авторизации
│   └── utils.js         # Вспомогательные функции
└── migrations/          # SQL миграции
```

## API Endpoints (требуются на бэкенде)

### Авторизация
- `POST /api/auth/login` - Вход в систему
- `POST /api/auth/logout` - Выход из системы

### Управление пользователями (super_admin)
- `GET /api/admin/users` - Список пользователей
- `POST /api/admin/users` - Создание пользователя
- `PUT /api/admin/users/:id` - Обновление пользователя
- `DELETE /api/admin/users/:id` - Удаление пользователя
- `GET /api/admin/stats/users` - Статистика пользователей
- `GET /api/admin/stats/documents` - Статистика документов

### Документы
- `GET /api/documents` - Список документов
- `POST /api/documents/generate` - Генерация документа
- `GET /api/documents/:id/download` - Скачивание документа

## Безопасность

- Все API запросы требуют токен авторизации
- Токен хранится в cookies
- Автоматический редирект на страницу входа при истечении токена
- Защита маршрутов на основе ролей

## Сборка для продакшена

```bash
npm run build
npm start
```

## Разработка

Для разработки используйте:

```bash
npm run dev
```

Приложение будет доступно на [http://localhost:3000](http://localhost:3000) с hot-reload.

