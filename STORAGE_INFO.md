# Информация о хранении документов

## Где хранятся файлы

Все сгенерированные PDF документы хранятся в папке:
```
uploads/documents/
```

**Важно:** Эта папка находится **вне** папки `static/` для безопасности. Файлы не доступны напрямую через URL, только через Flask маршруты.

## Формат имен файлов

Все PDF файлы имеют формат: `{UUID}.pdf`

Например:
- `5eb32c7b-8677-4edc-8228-b1d57ce6884a.pdf`
- `616146f8-fb26-43e2-9477-42098f2fb36c.pdf`

## Доступ к документам

### 1. По ID документа (для внутреннего использования)
```
GET /download/<doc_id>
```

### 2. По UUID (для QR-кода)
```
GET /download-by-uuid/<uuid>
```

### 3. Верификация по UUID (из QR-кода)
```
GET /verify/<uuid>
```
Открывает страницу просмотра документа с информацией о верификации.

## QR-код

QR-код в каждом документе содержит ссылку вида:
```
https://your-domain.com/verify/{UUID}
```

При сканировании QR-кода:
1. Пользователь попадает на страницу верификации
2. Видит информацию о документе
3. Может скачать PDF по кнопке

## Миграция старых файлов

Если у вас есть старые файлы в `static/generated_documents/`, их можно переместить в `uploads/documents/`, но это не обязательно - система будет создавать новые файлы в правильной папке автоматически.

## Настройка пути

Путь к папке можно изменить в файле `config.py` или через переменную окружения:
```python
UPLOAD_FOLDER = os.getenv('UPLOAD_FOLDER', 'uploads/documents')
```

Или в `.env` файле:
```
UPLOAD_FOLDER=uploads/documents
```

## Безопасность

- ✅ Файлы хранятся вне папки `static/` (не доступны напрямую)
- ✅ Доступ только через Flask маршруты с проверкой
- ✅ UUID используется для уникальной идентификации
- ✅ Папка `uploads/` добавлена в `.gitignore`

